<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="" id="meta-description">
    <meta name="keywords" content="编程学习,博客,技术分享">
    <meta property="og:title" content="" id="og-title">
    <meta property="og:description" content="" id="og-description">
    <meta property="og:type" content="article">
    <link rel="canonical" href="" id="canonical-link">
    <title id="page-title"></title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.8.0/build/styles/github.min.css">
    <style>
        /* 保留现有样式 */
        body {
            font-family: system-ui, -apple-system, 'Microsoft YaHei', sans-serif;
            line-height: 1.6;
            margin: 0 auto;
            padding: 20px;
            max-width: 800px;
            background-color: #f5f5f5;
        }
        /* 其他样式保持不变... */
    </style>
</head>
<body>
    <nav class="breadcrumb">
        <a href="/">首页</a>
        <span>></span>
        <a href="/articles">文章列表</a>
        <span>></span>
        <span id="article-title"></span>
    </nav>

    <article class="article-content markdown-body" id="content">
        <div id="loading">加载中...</div>
    </article>

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.8.0/build/highlight.min.js"></script>
    <script>
        const config = {
            owner: 'seoabc',
            repo: 'seoabc.github.io'
        };

        // 配置 marked
        marked.setOptions({
            breaks: true,
            gfm: true,
            highlight: function(code, lang) {
                if (lang && hljs.getLanguage(lang)) {
                    return hljs.highlight(code, { language: lang }).value;
                }
                return code;
            }
        });

        async function loadArticle() {
            try {
                // 从 URL 获取文件名
                const pathParts = window.location.pathname.split('/');
                const fileName = pathParts[pathParts.length - 1].replace('.html', '.md');
                
                // 从 GitHub API 获取文章内容
                const response = await fetch(
                    `https://api.github.com/repos/${config.owner}/${config.repo}/contents/articles/${fileName}`
                );
                
                if (!response.ok) {
                    throw new Error('文章不存在');
                }

                const data = await response.json();
                const content = decodeURIComponent(escape(atob(data.content)));
                
                // 解析文章标题
                const titleMatch = fileName.match(/\d{8}_\d{6}_(.+)\.md$/);
                const title = titleMatch ? decodeURIComponent(titleMatch[1].replace(/-/g, ' ')) : '未命名文章';
                
                // 更新页面标题和元数据
                document.title = `${title} - 编程学习笔记`;
                document.getElementById('page-title').textContent = title;
                document.getElementById('article-title').textContent = title;
                document.getElementById('meta-description').content = `${title} - 编程学习笔记`;
                document.getElementById('og-title').content = `${title} - 编程学习笔记`;
                document.getElementById('og-description').content = content.substring(0, 200);
                document.getElementById('canonical-link').href = window.location.href;

                // 渲染 Markdown 内容
                document.getElementById('content').innerHTML = marked.parse(content);
                
                // 应用代码高亮
                document.querySelectorAll('pre code').forEach((block) => {
                    hljs.highlightBlock(block);
                });
            } catch (error) {
                console.error('Error loading article:', error);
                document.getElementById('content').innerHTML = '<p>文章加载失败</p>';
            }
        }

        // 加载文章
        loadArticle();
    </script>
</body>
</html> 